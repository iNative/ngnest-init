<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Triforce Nx Init v8.0</title>
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&family=JetBrains+Mono:wght@400;500;700&display=swap" rel="stylesheet">

    <style>
        :root {
            --bg-color: #0d1117;
            --container-bg: #0d1117;
            --text-primary: #c9d1d9;
            --text-secondary: #8b949e;
            --accent: #58a6ff;
            --border: #30363d;
            --card-bg: #161b22;
            --code-bg: #0d1117;
            
            /* Tag Colors */
            --tag-react-bg: rgba(97, 218, 251, 0.15);
            --tag-react-text: #61dafb;
            --tag-ng-bg: rgba(221, 0, 49, 0.15);
            --tag-ng-text: #fca5a5;
            --tag-nest-bg: rgba(234, 40, 69, 0.15);
            --tag-nest-text: #ea2845;
            --tag-sh-bg: rgba(168, 85, 247, 0.15);
            --tag-sh-text: #a855f7;
        }

        * { box-sizing: border-box; margin: 0; padding: 0; }

        body {
            background-color: var(--bg-color);
            color: var(--text-primary);
            font-family: 'Inter', sans-serif;
            line-height: 1.6;
            padding: 20px;
        }

        .container {
            max-width: 900px;
            margin: 0 auto;
        }

        /* Header and Badge */
        header { text-align: center; margin-bottom: 3rem; padding: 2rem 0; border-bottom: 1px solid var(--border); }
        h1 { font-size: 2.5rem; color: #fff; margin-bottom: 0.5rem; }
        .badge { font-size: 1rem; vertical-align: middle; background: var(--accent); color: #0f172a; padding: 4px 10px; border-radius: 20px; margin-left: 10px; }

        /* Features Grid */
        .features-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 1.5rem; margin-bottom: 3rem; }
        .feature-card { background: var(--card-bg); border: 1px solid var(--border); border-radius: 8px; padding: 1.5rem; transition: transform 0.2s, border-color 0.2s; }
        .feature-card:hover { transform: translateY(-2px); border-color: var(--accent); }
        .feat-icon { font-size: 1.8rem; display: block; margin-bottom: 1rem; }
        .feat-title { font-weight: 700; font-size: 1.1rem; display: block; margin-bottom: 0.5rem; color: #fff; }
        .feat-desc { font-size: 0.9rem; color: var(--text-secondary); }

        /* Text Highlighting Classes */
        .hl-safety { color: #38bdf8; }
        .hl-auto { color: #4ade80; }
        .hl-perf { color: #f472b6; }

        /* Typography */
        h2 { color: #fff; margin: 3rem 0 1.5rem; border-bottom: 1px solid var(--border); padding-bottom: 0.5rem; }
        h3 { color: #fff; margin: 2rem 0 1rem; }
        code.inline { background: rgba(110, 118, 129, 0.4); padding: 2px 6px; border-radius: 4px; font-family: 'JetBrains Mono', monospace; font-size: 0.9em; }

        /* Code Blocks & Copy Button */
        .code-container { background: var(--code-bg); border: 1px solid var(--border); border-radius: 8px; margin: 1.5rem 0; overflow: hidden; }
        .code-header { display: flex; justify-content: space-between; align-items: center; background: #161b22; padding: 8px 16px; border-bottom: 1px solid var(--border); font-family: 'Inter', sans-serif; font-size: 0.85rem; color: var(--text-secondary); }
        .copy-btn { background: transparent; border: 1px solid var(--border); color: var(--text-secondary); padding: 4px 10px; border-radius: 4px; cursor: pointer; font-size: 0.8rem; transition: all 0.2s; }
        .copy-btn:hover { border-color: var(--accent); color: var(--accent); }
        
        pre { padding: 1.5rem; overflow-x: auto; font-family: 'JetBrains Mono', monospace; font-size: 0.9rem; line-height: 1.5; color: #e6edf3; }
        code { font-family: inherit; }

        /* Syntax Highlighting Colors */
        .cmt { color: #8b949e; font-style: italic; }
        .str { color: #a5d6ff; }
        .kwd { color: #ff7b72; }
        .var { color: #79c0ff; }
        .cls { color: #d2a8ff; }
        .ctl { color: #ff7b72; }
        .mtd { color: #d2a8ff; }

        /* Tables */
        table { width: 100%; border-collapse: collapse; margin: 1.5rem 0; background: var(--card-bg); border-radius: 8px; overflow: hidden; }
        th, td { padding: 12px 16px; border-bottom: 1px solid var(--border); text-align: left; }
        th { background: #0d1117; color: var(--text-secondary); font-weight: 600; font-size: 0.9rem; }
        tr:last-child td { border-bottom: none; }

        /* Tags */
        .tag { font-size: 0.75rem; padding: 2px 8px; border-radius: 12px; font-weight: 600; text-transform: uppercase; }
        .tag-react { background: var(--tag-react-bg); color: var(--tag-react-text); }
        .tag-ng { background: var(--tag-ng-bg); color: var(--tag-ng-text); }
        .tag-nest { background: var(--tag-nest-bg); color: var(--tag-nest-text); }
        .tag-sh { background: var(--tag-sh-bg); color: var(--tag-sh-text); }

        /* Footer */
        footer { margin-top: 5rem; padding-top: 2rem; border-top: 1px solid var(--border); text-align: center; color: var(--text-secondary); font-size: 0.9rem; }

        /* Mobile Adjustments */
        @media (max-width: 600px) {
            h1 { font-size: 2rem; }
            .features-grid { grid-template-columns: 1fr; }
            table, thead, tbody, th, td, tr { display: block; }
            thead tr { position: absolute; top: -9999px; left: -9999px; }
            tr { border: 1px solid var(--border); margin-bottom: 1rem; border-radius: 8px; }
            td { border: none; border-bottom: 1px solid var(--border); position: relative; padding-left: 35%; }
            td:before { position: absolute; top: 12px; left: 12px; width: 30%; font-weight: bold; content: attr(data-label); color: var(--text-secondary); }
        }
    </style>
</head>
<body>

<div class="container">
    <header>
        <h1>Triforce Nx Init <span class="badge">v8.0</span></h1>
        <p style="font-size: 1.2rem; color: var(--text-secondary);">
            The "Triforce" Architecture: Angular, React & NestJS Monorepo.
        </p>
        
        <div style="margin-top: 20px;">
            <a href="MasterLog_8.1.html" style="background: var(--accent); color: #0f172a; text-decoration: none; padding: 10px 20px; border-radius: 6px; font-weight: bold; font-size: 0.9rem;">
                üìÇ Open Master Log
            </a>
        </div>
    </header>

    <section class="features-grid">
        <div class="feature-card main">
            <span class="feat-icon">‚öõÔ∏è</span>
            <span class="feat-title hl-safety">React Public Site</span>
            <p class="feat-desc">
                Integrated specifically for high-performance, dynamic public-facing pages (CMS style). Powered by Vite.
            </p>
        </div>
        <div class="feature-card">
            <span class="feat-icon">üÖ∞Ô∏è</span>
            <span class="feat-title hl-auto">Angular Admin</span>
            <p class="feat-desc">
                Retained for robust, enterprise-grade back-office management interfaces. Powered by Esbuild.
            </p>
        </div>
        <div class="feature-card">
            <span class="feat-icon">ü¶Ö</span>
            <span class="feat-title hl-perf">NestJS Core</span>
            <p class="feat-desc">
                The brain. Serves APIs, manages multi-tenancy, and proxies assets for both frontends.
            </p>
        </div>
    </section>

    <main>
        <section id="setup">
            <h2>üöÄ Quick Start: Initialization</h2>
            <p style="color: var(--text-secondary);">
                Save this updated code as <code class="inline">triforce-nx.sh</code>. 
                <br>It scaffolds the complete 3-app structure: <code>backend</code>, <code>admin-panel</code> (Angular), and <code>public-site</code> (React).
            </p>

            <div class="code-container">
                <div class="code-header"><div>triforce-nx.sh</div><button class="copy-btn" onclick="copyToClipboard(this)">Copy</button></div>
                <pre><code><span class="cmt">#!/bin/bash</span>
<span class="cmt"># CONFIGURATION</span>
PROJECT_NAME=<span class="var">$1</span>
BACKEND_NAME="backend"
ADMIN_NAME="admin-panel"
PUBLIC_NAME="public-site"

<span class="ctl">if</span> [ -z <span class="str">"$PROJECT_NAME"</span> ]; <span class="ctl">then</span>
    <span class="mtd">echo</span> "Enter Workspace name:"
    <span class="mtd">read</span> PROJECT_NAME
<span class="ctl">fi</span>

<span class="cmt"># 1. Create Workspace</span>
npx create-nx-workspace@latest <span class="str">"$PROJECT_NAME"</span> --preset=apps --packageManager=npm --nxCloud=skip --yes
<span class="mtd">cd</span> <span class="str">"$PROJECT_NAME"</span>

<span class="cmt"># 2. Install Dependencies (The Triforce)</span>
npm install -D @nx/angular @nx/nest @nx/react @nx/vite @nx/js

<span class="cmt"># 3. Generate Backend (NestJS - Port 3000)</span>
npx nx g @nx/nest:application \
  --name=<span class="str">"$BACKEND_NAME"</span> \
  --directory=<span class="str">"apps/$BACKEND_NAME"</span> \
  --unitTestRunner=jest --no-interactive

<span class="cmt"># 4. Generate Admin Panel (Angular - Port 4201)</span>
npx nx g @nx/angular:application \
  --name=<span class="str">"$ADMIN_NAME"</span> \
  --directory=<span class="str">"apps/$ADMIN_NAME"</span> \
  --style=scss --routing --bundler=esbuild --port=4201 --no-interactive

<span class="cmt"># 5. Generate Public Site (React + Vite - Port 4200)</span>
npx nx g @nx/react:application \
  --name=<span class="str">"$PUBLIC_NAME"</span> \
  --directory=<span class="str">"apps/$PUBLIC_NAME"</span> \
  --style=scss --bundler=vite --unitTestRunner=vitest --no-interactive

<span class="cmt"># 6. Generate Shared Lib</span>
npx nx g @nx/js:library --name=shared-data --directory=libs/shared-data --bundler=tsc --importPath=<span class="str">"@$PROJECT_NAME/shared-data"</span>

<span class="mtd">echo</span> "‚úÖ Setup Complete! Use 'nx run-many -t serve' to start all apps."</code></pre>
            </div>
        </section>

        <section id="cheatsheet">
            <h2>‚ö° Updated Generators Cheatsheet</h2>
            <p style="color: var(--text-secondary);">We learned the hard way: <strong>always use explicit flags</strong> to avoid hydration errors and path issues.</p>

            <table>
                <thead>
                    <tr>
                        <th width="15%">Tech</th>
                        <th width="40%">Command</th>
                        <th>Why? / Notes</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td><span class="tag tag-react">React</span></td>
                        <td><code>nx g @nx/react:lib ui-blocks --directory=libs/ui-blocks</code></td>
                        <td>Create shared UI components (e.g. Hero, Grid) usable by React.</td>
                    </tr>
                    <tr>
                        <td><span class="tag tag-react">React</span></td>
                        <td><code>nx g @nx/react:component header --project=public-site</code></td>
                        <td>Generates a component specifically for the Public Site app.</td>
                    </tr>
                    <tr>
                        <td><span class="tag tag-ng">Angular</span></td>
                        <td><code>nx g @nx/angular:component features/cms-editor --project=admin-panel</code></td>
                        <td>Generates an admin component. Note the <code>--project</code> flag is crucial now.</td>
                    </tr>
                    <tr>
                        <td><span class="tag tag-nest">NestJS</span></td>
                        <td><code>nx g @nx/nest:resource pages --project=backend</code></td>
                        <td>Generates CRUD for the Page Builder API (Controller + Service + DTO).</td>
                    </tr>
                    <tr>
                        <td><span class="tag tag-sh">Shared</span></td>
                        <td><code>nx g @nx/js:lib shared-data</code></td>
                        <td><strong>The Bridge.</strong> Put all your Interfaces and DTOs here.</td>
                    </tr>
                </tbody>
            </table>
        </section>

        <section id="ports">
            <h2>üîå Port Management Strategy</h2>
            <p style="color: var(--text-secondary);">With 3 apps running, port conflicts are the enemy. Here is the standard config:</p>
            
            <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 10px; margin-top: 20px;">
                <div style="background: #1e1e1e; padding: 15px; border-radius: 8px; border: 1px solid #333; text-align: center;">
                    <div style="font-size: 1.5rem;">ü¶Ö</div>
                    <strong style="color: #ea2845">Backend</strong>
                    <div style="font-family: monospace; margin-top: 5px; color: #aaa;">:3000</div>
                    <div style="font-size: 0.8rem; color: #666;">API & Assets</div>
                </div>
                <div style="background: #1e1e1e; padding: 15px; border-radius: 8px; border: 1px solid #333; text-align: center;">
                    <div style="font-size: 1.5rem;">‚öõÔ∏è</div>
                    <strong style="color: #61dafb">Public Site</strong>
                    <div style="font-family: monospace; margin-top: 5px; color: #aaa;">:4200</div>
                    <div style="font-size: 0.8rem; color: #666;">Vite Proxy -> :3000</div>
                </div>
                <div style="background: #1e1e1e; padding: 15px; border-radius: 8px; border: 1px solid #333; text-align: center;">
                    <div style="font-size: 1.5rem;">üÖ∞Ô∏è</div>
                    <strong style="color: #fca5a5">Admin Panel</strong>
                    <div style="font-family: monospace; margin-top: 5px; color: #aaa;">:4201</div>
                    <div style="font-size: 0.8rem; color: #666;">Direct API calls</div>
                </div>
            </div>
        </section>
    </main>

    <footer>
        <p>¬© 2026 Guido Filippo Serio - Script Version 8.0</p>
    </footer>
</div>

<script>
    function copyToClipboard(button) {
        const header = button.parentElement;
        const codeBlock = header.nextElementSibling;
        const text = codeBlock.textContent;

        navigator.clipboard.writeText(text).then(() => {
            const originalText = button.textContent;
            button.textContent = "Copied!";
            button.style.borderColor = "var(--accent)";
            button.style.color = "var(--accent)";
            
            setTimeout(() => {
                button.textContent = originalText;
                button.style.borderColor = "var(--border)";
                button.style.color = "var(--text-secondary)";
            }, 2000);
        });
    }
</script>

</body>
</html>
